angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(b,a){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired"},link:function(k,f,j,e){function d(l){return RegExp("\\d|\\-|\\"+l,"g")}function c(l){return RegExp("\\-{0,1}((\\"+l+")|([0-9]{1,}\\"+l+"?))&?[0-9]{0,2}","g")}function g(n){n=String(n);var m=a.NUMBER_FORMATS.DECIMAL_SEP;var l=null;if(RegExp("^-[\\s]*$","g").test(n)){n="-0"}if(d(m).test(n)){l=n.match(d(m)).join("").match(c(m));l=l?l[0].replace(m,"."):null}return l}function h(){if(angular.isDefined(k.currencySymbol)){return k.currencySymbol}else{return a.NUMBER_FORMATS.CURRENCY_SYM}}e.$parsers.push(function(m){var l=g(m);return parseFloat(l)});f.on("blur",function(){f.val(b("currency")(e.$modelValue,h()))});e.$formatters.unshift(function(l){return b("currency")(l,h())});k.$watch(function(){return e.$modelValue},function(m,l){i(m)});function i(n){if(isNaN(n)){return}if(typeof k.min!=="undefined"){var m=parseFloat(k.min);e.$setValidity("min",n>=m)}if(typeof k.max!=="undefined"){var l=parseFloat(k.max);e.$setValidity("max",n<=l)}}}}}]);