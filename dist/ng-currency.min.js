if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports===exports){module.exports="ng-currency"}angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(b,a){return{require:"ngModel",scope:{min:"=?min",max:"=?max",currencySymbol:"@",displayZeroes:"=?displayZeroes",ngRequired:"=?ngRequired",fraction:"=?fraction"},link:function(k,g,j,f){if(j.ngCurrency==="false"){return}k.fraction=(typeof k.fraction!=="undefined")?k.fraction:2;k.displayZeroes=(typeof k.displayZeroes!=="undefined")?k.displayZeroes:true;function e(l){return RegExp("\\d|\\-|\\"+l,"g")}function c(l){return RegExp("\\-{0,1}((\\"+l+")|([0-9]{1,}\\"+l+"?))&?[0-9]{0,"+k.fraction+"}","g")}function h(q){q=String(q);var m=a.NUMBER_FORMATS.DECIMAL_SEP;var l=null;if(!k.displayZeroes&&q===""){return q}if(q.indexOf(a.NUMBER_FORMATS.DECIMAL_SEP)==-1&&q.indexOf(".")!=-1&&k.fraction){m="."}var p=b("currency")("-1",d(),k.fraction);var o=RegExp("[0-9."+a.NUMBER_FORMATS.DECIMAL_SEP+a.NUMBER_FORMATS.GROUP_SEP+"]+");var n=p.replace(o.exec(p),"");var r=q.replace(o.exec(q),"");if(n==r){q="-"+o.exec(q)}if(RegExp("^-[\\s]*$","g").test(q)){q="-0"}if(e(m).test(q)){l=q.match(e(m)).join("").match(c(m));l=l?l[0].replace(m,"."):null}return l}function d(){if(angular.isDefined(k.currencySymbol)){return k.currencySymbol}else{return a.NUMBER_FORMATS.CURRENCY_SYM}}function i(){var m=f.$formatters,l=m.length;var n=f.$$rawModelValue;if(!k.displayZeroes&&n.length&&parseFloat(n)==0){n=""}else{while(l--){n=m[l](n)}}f.$setViewValue(n);f.$render()}f.$parsers.push(function(m){var l=h(m);if(l=="."||l=="-."){l=".0"}return(!k.displayZeroes&&m==="")?0:parseFloat(l)});g.on("blur",function(){f.$commitViewValue();i()});f.$formatters.unshift(function(l){if(!k.displayZeroes&&l.length&&parseFloat(l)==0){return""}return b("currency")(l,d(),k.fraction)});f.$validators.min=function(l){if(!k.ngRequired&&isNaN(l)){return true}if(typeof k.min!=="undefined"){return l>=parseFloat(k.min)}return true};k.$watch("min",function(l){f.$validate()});f.$validators.max=function(l){if(!k.ngRequired&&isNaN(l)){return true}if(typeof k.max!=="undefined"){return l<=parseFloat(k.max)}return true};k.$watch("max",function(l){f.$validate()});f.$validators.fraction=function(l){if(!!l&&isNaN(l)){return false}return true};k.$on("currencyRedraw",function(){f.$commitViewValue();i()});g.on("focus",function(){var l=f.$$rawModelValue;if(!k.displayZeroes&&!l){return l;}if(isNaN(l)||l===""||l==null){l="0.00"}else{l=parseFloat(l).toFixed(k.fraction)}f.$setViewValue(l);f.$render()})}}}]);